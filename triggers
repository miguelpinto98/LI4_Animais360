CREATE TRIGGER trg_acabouJogoSucesso
	ON dbo.Jogos
	FOR UPDATE
	AS
	BEGIN
		set nocount on

		declare @id int;
		declare @idUser int;
		declare @sucesso int;
		declare @SucessoAntigo int;

		select @id = JogoId from inserted;
		select @idUser = User_UserId from inserted;
		select @sucesso = Sucesso from dbo.Jogos where JogoId = @id;
		select @SucessoAntigo = Sucesso from deleted Where JogoId = @id;

		if(@sucesso <> @SucessoAntigo)
		begin
			UPDATE dbo.Users set NrVoltas = NrVoltas + 1 WHERE UserId = @idUser;
		end
	END

CREATE TRIGGER trg_iniciaJogo
	ON dbo.Jogos
	FOR INSERT
	AS
	BEGIN
		set nocount on

		declare @id int

		select @id = User_UserId from inserted

		UPDATE Users set NrJogos = NrJogos + 1 WHERE UserId = @id;
	END